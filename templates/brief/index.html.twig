{% extends 'base.html.twig' %}

{% block title %}Hello BriefController!
{% endblock %}

{% block body %}
	{% include '_partials/_header.html.twig' %}

	<section class="container position-relative">
		<div class="p-4 position-relative box-content">

			<div class="d-flex justify-content-end">
				<a href="{{ path('brief_create') }}" class="btn btn-primary my-4 ms-auto">Ajouter un brief</a>
			</div>

			<div
				class="row mb-3">

				<!-- Formulaire de recherche par nom de société -->
				<div class="col-md-6">
					<form method="get">
						<div class="input-group position-relative">
							<input type="text" class="search-input form-control" name="q" placeholder="Rechercher par nom de société" value="{{ app.request.get('q') }}">
							<button type="submit" class="search-btn btn input-group-prepend position-absolute"><img src="{{ asset('assets/img/search.svg') }}" alt="Rechercher"></button>

						</div>
					</form>
				</div>

				<div class="col-md-6">
					<form method="get">
						<div class="input-group position-relative">
							<select class="filter-input form-control" name="status">
								<option value="">Filtrer par statut</option>
								<option value="nouveau" {{ app.request.get('status') == 'nouveau' ? 'selected' }}>Nouveau</option>
								<option value="à valider" {{ app.request.get('status') == 'à valider' ? 'selected' }}>À valider</option>
								<option value="à compléter" {{ app.request.get('status') == 'à compléter' ? 'selected' }}>À compléter</option>
								<option value="validé" {{ app.request.get('status') == 'validé' ? 'selected' }}>Validé</option>
								<option value="en cours" {{ app.request.get('status') == 'en cours' ? 'selected' }}>En cours</option>
								<option value="terminé" {{ app.request.get('status') == 'terminé' ? 'selected' }}>Terminé</option>
							</select>
							<button type="submit" class="filter-btn btn input-group-prepend position-absolute"><img src="{{ asset('assets/img/filter.svg') }}" alt="Filtrer"></button>
						</div>
					</form>
				</div>
			</div>

			<table class="table table-borderless table-striped table-hover">


				<thead>
					<tr>
						<th>Typologie</th>
						<th>Nom de la société</th>
						<th>Date de mise en ligne souhaitée</th>
						<th>Choix du pack</th>
						<th>Action</th>
					</tr>
				</thead>
				<tbody>
					{% for brief in briefs %}
						<tr>
							<td>{{ brief.type }}</td>
							<td>{{ brief.company }}</td>
							<td>{{ brief.onlineDate|date('d/m/Y') }}</td>
							<td>{{ brief.artisan|default(brief.avocat) }}</td>
							<td>

								<a href="{{ path('brief_show', { 'id': brief.id })}}" class="mx-2"><img src="{{ asset('assets/img/show.svg') }}" alt="show"></a>

								<a href="{{ path('brief_edit', { 'id': brief.id })}}" class="mx-2"><img src="{{ asset('assets/img/edit.svg') }}" alt="éditer"></a>


								<a href="{{ path('brief_download', { 'id': brief.id })}}" class="mx-2"><img src="{{ asset('assets/img/download.svg') }}" alt="télécharger"></a>


								<a href="{{ path('brief_delete', { 'id': brief.id })}}" class="mx-2"><img src="{{ asset('assets/img/delete.svg') }}" alt="supprimer"></a>

							</td>
						</tr>
					{% else %}
						<tr>
							<td colspan="4">Aucun brief trouvé.</td>
						</tr>
					{% endfor %}
				</tbody>
			</table>

			<div class="d-flex justify-content-end">
				<a href="{{ path('brief_create') }}" class="btn btn-primary my-4 ms-auto">Ajouter un brief</a>
			</div>

		</div>
	</section>


{% endblock %}
